# Spark 기본 설정 (모든 노드 공통)
# 위치: /opt/spark/conf/spark-defaults.conf

# S3 접근 설정
spark.hadoop.fs.s3a.impl=org.apache.hadoop.fs.s3a.S3AFileSystem
spark.hadoop.fs.s3a.aws.credentials.provider=com.amazonaws.auth.InstanceProfileCredentialsProvider
spark.hadoop.fs.s3a.endpoint=s3.ap-northeast-2.amazonaws.com
spark.hadoop.fs.s3a.path.style.access=false

# S3 성능 최적화
spark.hadoop.fs.s3a.connection.ssl.enabled=true
spark.hadoop.fs.s3a.fast.upload=true
spark.hadoop.fs.s3a.fast.upload.buffer=disk
spark.hadoop.fs.s3a.multipart.size=104857600
spark.hadoop.fs.s3a.connection.maximum=100
spark.hadoop.fs.s3a.threads.max=50

# Spark 기본 설정
spark.executor.memory=4g
spark.executor.cores=2
spark.driver.memory=2g

# 셔플 설정
spark.shuffle.service.enabled=false
spark.dynamicAllocation.enabled=false

# 로그 설정
spark.eventLog.enabled=true
spark.eventLog.dir=/opt/spark/spark-events
spark.history.fs.logDirectory=/opt/spark/spark-events

# 네트워크 타임아웃
spark.network.timeout=800s
spark.executor.heartbeatInterval=60s
